<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Transaction History - Elite Banking Portal</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Felitebank3949back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
</head>
<body class="bg-background min-h-screen">
    <!-- Header Navigation -->
    <header class="bg-surface border-b border-secondary-200 sticky top-0 z-50 backdrop-blur-banking">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-primary-600 to-primary-800 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z"/>
                            <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-primary-800">Elite Banking</h1>
                        <p class="text-xs text-secondary-500">Secure Banking Portal</p>
                    </div>
                </div>

                <!-- Navigation Links -->
                <nav class="hidden md:flex items-center space-x-6">
                    <a href="personal_dashboard.html" class="text-secondary-600 hover:text-primary-600 transition-colors duration-200">Dashboard</a>
                    <a href="transaction_history.html" class="text-primary-600 font-medium">Transactions</a>
                    <a href="money_transfer.html" class="text-secondary-600 hover:text-primary-600 transition-colors duration-200">Transfer</a>
                    <a href="account_settings.html" class="text-secondary-600 hover:text-primary-600 transition-colors duration-200">Settings</a>
                    <a href="secure_login.html" class="text-secondary-600 hover:text-primary-600 transition-colors duration-200">Sign Out</a>
                </nav>

                <!-- User Profile -->
                <div class="hidden md:flex items-center space-x-3">
                    <div class="text-right">
                        <p class="text-sm font-medium text-text-primary">John Doe</p>
                        <p class="text-xs text-secondary-500">Premium Account</p>
                    </div>
                    <div class="w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center">
                        <span class="text-primary-600 font-medium">JD</span>
                    </div>
                </div>

                <!-- Mobile Menu Button -->
                <button class="md:hidden p-2 rounded-lg hover:bg-secondary-100 transition-colors duration-200">
                    <svg class="w-6 h-6 text-secondary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Page Header -->
        <div class="mb-8">
            <div class="flex items-center justify-between mb-4">
                <div>
                    <h2 class="text-3xl font-bold text-text-primary">Transaction History</h2>
                    <p class="text-secondary-600 mt-1">Review and analyze your complete banking transaction records</p>
                </div>
                <div class="flex items-center space-x-3">
                    <button class="btn-secondary flex items-center space-x-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/>
                        </svg>
                        <span>Print</span>
                    </button>
                    <button class="btn-secondary flex items-center space-x-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        <span>Export CSV</span>
                    </button>
                    <button class="btn-primary flex items-center space-x-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        <span>Download Statement</span>
                    </button>
                </div>
            </div>

            <!-- Account Summary Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="card p-6 animate-fade-in">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-sm font-medium text-secondary-600">Current Balance</h3>
                        <div class="w-8 h-8 bg-success-100 rounded-full flex items-center justify-center">
                            <svg class="w-4 h-4 text-success-600" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z"/>
                            </svg>
                        </div>
                    </div>
                    <p class="text-2xl font-bold text-text-primary data-mono">$129,847,567.50</p>
                    <p class="text-xs text-success-600 mt-1">+200.5% from last month</p>
                </div>

                <div class="card p-6 animate-fade-in delay-100">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-sm font-medium text-secondary-600">This Month</h3>
                        <div class="w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center">
                            <svg class="w-4 h-4 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                            </svg>
                        </div>
                    </div>
                    <p class="text-2xl font-bold text-text-primary data-mono">$300,245.80</p>
                    <p class="text-xs text-secondary-500 mt-1">Total transactions</p>
                </div>

                <div class="card p-6 animate-fade-in delay-200">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-sm font-medium text-secondary-600">Income</h3>
                        <div class="w-8 h-8 bg-success-100 rounded-full flex items-center justify-center">
                            <svg class="w-4 h-4 text-success-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11l5-5m0 0l5 5m-5-5v12"/>
                            </svg>
                        </div>
                    </div>
                    <p class="text-2xl font-bold text-text-primary data-mono">$50,420.00</p>
                    <p class="text-xs text-success-600 mt-1">+80.2% increase</p>
                </div>

                <div class="card p-6 animate-fade-in delay-300">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-sm font-medium text-secondary-600">Expenses</h3>
                        <div class="w-8 h-8 bg-error-100 rounded-full flex items-center justify-center">
                            <svg class="w-4 h-4 text-error-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 13l-5 5m0 0l-5-5m5 5V6"/>
                            </svg>
                        </div>
                    </div>
                    <p class="text-2xl font-bold text-text-primary data-mono">$2,174.20</p>
                    <p class="text-xs text-error-600 mt-1">-3.1% decrease</p>
                </div>
            </div>
        </div>

        <!-- Filters and Search Section -->
        <div class="card p-6 mb-8 animate-slide-up">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-lg font-semibold text-text-primary">Filter Transactions</h3>
                <button class="text-primary-600 hover:text-primary-700 text-sm font-medium" onclick="resetFilters()">
                    Reset All Filters
                </button>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6">
                <!-- Search Bar -->
                <div class="lg:col-span-2">
                    <label class="block text-sm font-medium text-text-primary mb-2">Search Transactions</label>
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="Search by description, merchant, or reference..." class="form-input pl-10" onkeyup="filterTransactions()" />
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="w-5 h-5 text-secondary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Account Filter -->
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-2">Account</label>
                    <select id="accountFilter" class="form-input" onchange="filterTransactions()">
                        <option value>All Accounts</option>
                        <option value="checking">Checking Account</option>
                        <option value="savings">Savings Account</option>
                        <option value="credit">Credit Card</option>
                    </select>
                </div>

                <!-- Transaction Type Filter -->
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-2">Transaction Type</label>
                    <select id="typeFilter" class="form-input" onchange="filterTransactions()">
                        <option value>All Types</option>
                        <option value="deposit">Deposits</option>
                        <option value="withdrawal">Withdrawals</option>
                        <option value="transfer">Transfers</option>
                        <option value="payment">Payments</option>
                    </select>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                <!-- Date Range -->
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-2">From Date</label>
                    <input type="date" id="fromDate" class="form-input" onchange="filterTransactions()" value="2025-08-01" />
                </div>
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-2">To Date</label>
                    <input type="date" id="toDate" class="form-input" onchange="filterTransactions()" value="2025-09-05" />
                </div>

                <!-- Category Filter -->
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-2">Category</label>
                    <select id="categoryFilter" class="form-input" onchange="filterTransactions()">
                        <option value>All Categories</option>
                        <option value="food">Food & Dining</option>
                        <option value="shopping">Shopping</option>
                        <option value="transport">Transportation</option>
                        <option value="utilities">Utilities</option>
                        <option value="entertainment">Entertainment</option>
                        <option value="healthcare">Healthcare</option>
                        <option value="salary">Salary</option>
                        <option value="other">Other</option>
                    </select>
                </div>
            </div>

            <!-- Amount Range -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-2">Minimum Amount</label>
                    <div class="relative">
                        <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-500">$</span>
                        <input type="number" id="minAmount" placeholder="0.00" class="form-input pl-8" onchange="filterTransactions()" />
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-2">Maximum Amount</label>
                    <div class="relative">
                        <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-500">$</span>
                        <input type="number" id="maxAmount" placeholder="10000.00" class="form-input pl-8" onchange="filterTransactions()" />
                    </div>
                </div>
            </div>

            <!-- Results Count -->
            <div class="mt-6 pt-4 border-t border-secondary-200">
                <p class="text-sm text-secondary-600">
                    Showing <span id="resultsCount" class="font-medium text-text-primary">24</span> transactions
                    <span class="ml-4">
                        <input type="checkbox" id="selectAll" class="mr-2" onchange="toggleSelectAll()" />
                        <label for="selectAll" class="text-sm">Select All Visible</label>
                    </span>
                </p>
            </div>
        </div>

        <!-- Transaction Table -->
        <div class="card animate-slide-up delay-100">
            <!-- Desktop Table View -->
            <div class="hidden lg:block overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-secondary-50 border-b border-secondary-200">
                        <tr>
                            <th class="px-6 py-4 text-left">
                                <input type="checkbox" id="headerCheckbox" onchange="toggleSelectAll()" />
                            </th>
                            <th class="px-6 py-4 text-left text-xs font-medium text-secondary-600 uppercase tracking-wider cursor-pointer hover:text-primary-600" onclick="sortTable('date')">
                                Date
                                <svg class="w-4 h-4 inline ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4"/>
                                </svg>
                            </th>
                            <th class="px-6 py-4 text-left text-xs font-medium text-secondary-600 uppercase tracking-wider">Description</th>
                            <th class="px-6 py-4 text-left text-xs font-medium text-secondary-600 uppercase tracking-wider">Category</th>
                            <th class="px-6 py-4 text-left text-xs font-medium text-secondary-600 uppercase tracking-wider cursor-pointer hover:text-primary-600" onclick="sortTable('amount')">
                                Amount
                                <svg class="w-4 h-4 inline ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4"/>
                                </svg>
                            </th>
                            <th class="px-6 py-4 text-left text-xs font-medium text-secondary-600 uppercase tracking-wider">Balance</th>
                            <th class="px-6 py-4 text-left text-xs font-medium text-secondary-600 uppercase tracking-wider">Status</th>
                            <th class="px-6 py-4 text-left text-xs font-medium text-secondary-600 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="transactionTableBody" class="bg-white divide-y divide-secondary-200">
                        <!-- Transaction rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Mobile Card View -->
            <div class="lg:hidden space-y-4 p-4" id="mobileTransactionList">
                <!-- Mobile transaction cards will be populated by JavaScript -->
            </div>

            <!-- Pagination -->
            <div class="px-6 py-4 border-t border-secondary-200 flex items-center justify-between">
                <div class="flex items-center space-x-2">
                    <span class="text-sm text-secondary-600">Show</span>
                    <select id="pageSize" class="form-input py-1 px-2 text-sm" onchange="updatePagination()">
                        <option value="10">10</option>
                        <option value="25" selected>25</option>
                        <option value="50">50</option>
                        <option value="100">100</option>
                    </select>
                    <span class="text-sm text-secondary-600">per page</span>
                </div>

                <div class="flex items-center space-x-2">
                    <button class="btn-secondary py-2 px-3 text-sm" onclick="previousPage()" id="prevBtn">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    
                    <div class="flex items-center space-x-1" id="pageNumbers">
                        <!-- Page numbers will be populated by JavaScript -->
                    </div>
                    
                    <button class="btn-secondary py-2 px-3 text-sm" onclick="nextPage()" id="nextBtn">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Transaction Details Modal -->
        <div id="transactionModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
            <div class="bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto">
                <div class="p-6 border-b border-secondary-200">
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-semibold text-text-primary">Transaction Details</h3>
                        <button onclick="closeModal()" class="text-secondary-400 hover:text-secondary-600">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div id="modalContent" class="p-6">
                    <!-- Modal content will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-surface border-t border-secondary-200 mt-16">
        <div class="container mx-auto px-4 py-8">
            <div class="text-center">
                <p class="text-sm text-secondary-600">
                    © 2025 Elite Banking Portal. All Rights Reserved. | 
                    <a href="javascript:void(0)" class="text-primary-600 hover:text-primary-700">Privacy Policy</a> | 
                    <a href="javascript:void(0)" class="text-primary-600 hover:text-primary-700">Terms of Service</a>
                </p>
                <p class="text-xs text-secondary-500 mt-2">
                    Member FDIC. Equal Housing Lender. Your deposits are insured up to $250,000.
                </p>
            </div>
        </div>
    </footer>

    <!-- JavaScript for Transaction Management -->
    <script>
        // Mock transaction data
        const mockTransactions = [
            {
                id: 'TXN001',
                date: '2025-09-05',
                description: 'Salary Deposit - Tech Corp',
                category: 'salary',
                amount: 151200.00,
                type: 'deposit',
                balance: 12847567.50,
                status: 'completed',
                account: 'checking',
                reference: 'SAL-2025-09-001',
                merchant: 'Tech Corp',
                location: 'Direct Deposit'
            },
            {
                id: 'TXN002',
                date: '2025-09-04',
                description: 'Grocery Store - Fresh Market',
                category: 'food',
                amount: -125.67,
                type: 'payment',
                balance: 43018.50,
                status: 'completed',
                account: 'checking',
                reference: 'POS-2025-09-002',
                merchant: 'Fresh Market',
                location: 'New York, NY'
            },
            {
                id: 'TXN003',
                date: '2025-09-03',
                description: 'Electric Bill Payment',
                category: 'utilities',
                amount: -89.45,
                type: 'payment',
                balance: 43143.17,
                status: 'completed',
                account: 'checking',
                reference: 'BILL-2025-09-003',
                merchant: 'ConEd Electric',
                location: 'Online Payment'
            },
            {
                id: 'TXN004',
                date: '2025-09-02',
                description: 'Online Shopping - Ali Express',
                category: 'other',
                amount: -200.00,
                type: 'payment',
                balance: 43032.62,
                status: 'completed',
                account: 'checking',
                reference: 'AMZ-2025-09-004',
                merchant: 'Ali Express.com',
                location: 'Online Purchase'
            },
            {
                id: 'TXN005',
                date: '2025-09-01',
                description: 'Online Shopping - Amazon',
                category: 'shopping',
                amount: -67.89,
                type: 'payment',
                balance: 43232.62,
                status: 'completed',
                account: 'credit',
                reference: 'AMZ-2025-09-005',
                merchant: 'Amazon.com',
                location: 'Online Purchase'
            },
            {
                id: 'TXN006',
                date: '2025-08-31',
                description: 'CoinBase',
                category: 'Crypto',
                amount: -45000.23,
                type: 'payment',
                balance: 43300.51,
                status: 'completed',
                account: 'checking',
                reference: 'GAS-2025-08-006',
                merchant: 'CoinBase.com',
                location: 'Online Purchase'
            },
            {
                id: 'TXN007',
                date: '2025-08-30',
                description: 'Trust Wallet',
                category: 'other',
                amount: -78000.50,
                type: 'payment',
                balance: 88750.74,
                status: 'completed',
                account: 'credit',
                reference: 'REST-2025-08-007',
                merchant: 'Trust Wallet',
                location: 'Online'
            },
            {
                id: 'TXN008',
                date: '2025-08-29',
                description: 'Movie Theater - AMC',
                category: 'entertainment',
                amount: -24.99,
                type: 'payment',
                balance: 89540.24,
                status: 'completed',
                account: 'checking',
                reference: 'ENT-2025-08-008',
                merchant: 'AMC Theaters',
                location: 'Times Square'
            },
            {
                id: 'TXN009',
                date: '2025-08-28',
                description: 'Binance.com',
                category: 'investment',
                amount: -32000.15,
                type: 'payment',
                balance: 89790.23,
                status: 'completed',
                account: 'checking',
                reference: 'MED-2025-08-009',
                merchant: 'Binance.com',
                location: 'Online'
            },
            {
                id: 'TXN010',
                date: '2025-08-27',
                description: 'Transfer to Savings',
                category: 'other',
                amount: -500.00,
                type: 'transfer',
                balance: 9011.38,
                status: 'completed',
                account: 'checking',
                reference: 'TRF-2025-08-010',
                merchant: 'Internal Transfer',
                location: 'Online Banking'
            },
            {
                id: 'TXN011',
                date: '2025-08-26',
                description: 'CoinBase',
                category: 'investment',
                amount: -50000.75,
                type: 'payment',
                balance: 95110.38,
                status: 'completed',
                account: 'checking',
                reference: 'COF-2025-08-011',
                merchant: 'CoinBase.com',
                location: 'Online'
            },
            {
                id: 'TXN012',
                date: '2025-08-25',
                description: 'Internet Bill - Verizon',
                category: 'utilities',
                amount: -79.99,
                type: 'payment',
                balance: 9517.13,
                status: 'completed',
                account: 'checking',
                reference: 'INT-2025-08-012',
                merchant: 'Verizon',
                location: 'Auto-Pay'
            },
            {
                id: 'TXN013',
                date: '2025-08-24',
                description: 'Freelance Payment',
                category: 'salary',
                amount: 920.00,
                type: 'deposit',
                balance: 9597.12,
                status: 'completed',
                account: 'checking',
                reference: 'FRL-2025-08-013',
                merchant: 'Design Agency',
                location: 'Wire Transfer'
            },
            {
                id: 'TXN014',
                date: '2025-08-23',
                description: 'Uber Ride',
                category: 'transport',
                amount: -18.45,
                type: 'payment',
                balance: 8677.12,
                status: 'completed',
                account: 'credit',
                reference: 'UBR-2025-08-014',
                merchant: 'Uber Technologies',
                location: 'Manhattan'
            },
            {
                id: 'TXN015',
                date: '2025-08-22',
                description: 'Gym Membership - FitLife',
                category: 'healthcare',
                amount: -49.99,
                type: 'payment',
                balance: 8695.57,
                status: 'completed',
                account: 'checking',
                reference: 'GYM-2025-08-015',
                merchant: 'FitLife Gym',
                location: 'Monthly Subscription'
            },
            {
                id: 'TXN016',
                date: '2025-08-21',
                description: 'Book Store - Barnes & Noble',
                category: 'shopping',
                amount: -34.95,
                type: 'payment',
                balance: 8745.56,
                status: 'completed',
                account: 'checking',
                reference: 'BKS-2025-08-016',
                merchant: 'Barnes & Noble',
                location: 'Union Square'
            },
            {
                id: 'TXN017',
                date: '2025-08-20',
                description: 'Dividend Payment - AAPL',
                category: 'salary',
                amount: 125.50,
                type: 'deposit',
                balance: 8780.51,
                status: 'completed',
                account: 'savings',
                reference: 'DIV-2025-08-017',
                merchant: 'Apple Inc.',
                location: 'Investment Account'
            },
            {
                id: 'TXN018',
                date: '2025-08-19',
                description: 'Clothing Store - H&M',
                category: 'shopping',
                amount: -89.99,
                type: 'payment',
                balance: 8655.01,
                status: 'completed',
                account: 'credit',
                reference: 'CLO-2025-08-018',
                merchant: 'H&M',
                location: 'Fifth Avenue'
            },
            {
                id: 'TXN019',
                date: '2025-08-18',
                description: 'Parking Fee',
                category: 'transport',
                amount: -12.00,
                type: 'payment',
                balance: 8745.00,
                status: 'completed',
                account: 'checking',
                reference: 'PRK-2025-08-019',
                merchant: 'City Parking',
                location: 'Downtown Garage'
            },
            {
                id: 'TXN020',
                date: '2025-08-17',
                description: 'Streaming Service - Netflix',
                category: 'entertainment',
                amount: -15.99,
                type: 'payment',
                balance: 8757.00,
                status: 'completed',
                account: 'checking',
                reference: 'STR-2025-08-020',
                merchant: 'Netflix',
                location: 'Monthly Subscription'
            },
            {
                id: 'TXN021',
                date: '2025-08-16',
                description: 'Lunch - Local Deli',
                category: 'food',
                amount: -12.50,
                type: 'payment',
                balance: 8772.99,
                status: 'completed',
                account: 'checking',
                reference: 'LUN-2025-08-021',
                merchant: 'Corner Deli',
                location: 'Office District'
            },
            {
                id: 'TXN022',
                date: '2025-08-15',
                description: 'Phone Bill - T-Mobile',
                category: 'utilities',
                amount: -65.00,
                type: 'payment',
                balance: 8785.49,
                status: 'completed',
                account: 'checking',
                reference: 'PHN-2025-08-022',
                merchant: 'T-Mobile',
                location: 'Auto-Pay'
            },
            {
                id: 'TXN023',
                date: '2025-08-14',
                description: 'Cash Deposit - Branch',
                category: 'other',
                amount: 300.00,
                type: 'deposit',
                balance: 8850.49,
                status: 'completed',
                account: 'checking',
                reference: 'DEP-2025-08-023',
                merchant: 'Elite Bank Branch',
                location: 'Main Street Branch'
            },
            {
                id: 'TXN024',
                date: '2025-08-13',
                description: 'Hardware Store - Home Depot',
                category: 'shopping',
                amount: -156.78,
                type: 'payment',
                balance: 8550.49,
                status: 'completed',
                account: 'credit',
                reference: 'HRD-2025-08-024',
                merchant: 'Home Depot',
                location: 'Brooklyn Store'
            }
        ];

        let filteredTransactions = [...mockTransactions];
        let currentPage = 1;
        let pageSize = 25;
        let sortField = 'date';
        let sortDirection = 'desc';
        let selectedTransactions = new Set();

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            renderTransactions();
            updatePagination();
        });

        // Filter transactions based on current filter settings
        function filterTransactions() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const accountFilter = document.getElementById('accountFilter').value;
            const typeFilter = document.getElementById('typeFilter').value;
            const categoryFilter = document.getElementById('categoryFilter').value;
            const fromDate = document.getElementById('fromDate').value;
            const toDate = document.getElementById('toDate').value;
            const minAmount = parseFloat(document.getElementById('minAmount').value) || -Infinity;
            const maxAmount = parseFloat(document.getElementById('maxAmount').value) || Infinity;

            filteredTransactions = mockTransactions.filter(transaction => {
                const matchesSearch = !searchTerm || 
                    transaction.description.toLowerCase().includes(searchTerm) ||
                    transaction.merchant.toLowerCase().includes(searchTerm) ||
                    transaction.reference.toLowerCase().includes(searchTerm);
                
                const matchesAccount = !accountFilter || transaction.account === accountFilter;
                const matchesType = !typeFilter || transaction.type === typeFilter;
                const matchesCategory = !categoryFilter || transaction.category === categoryFilter;
                
                const matchesDateRange = (!fromDate || transaction.date >= fromDate) && 
                                       (!toDate || transaction.date <= toDate);
                
                const absoluteAmount = Math.abs(transaction.amount);
                const matchesAmountRange = absoluteAmount >= minAmount && absoluteAmount <= maxAmount;

                return matchesSearch && matchesAccount && matchesType && 
                       matchesCategory && matchesDateRange && matchesAmountRange;
            });

            // Sort filtered transactions
            sortTransactions();
            
            // Reset to first page
            currentPage = 1;
            selectedTransactions.clear();
            
            // Update display
            renderTransactions();
            updatePagination();
            updateResultsCount();
        }

        // Sort transactions
        function sortTransactions() {
            filteredTransactions.sort((a, b) => {
                let aValue = a[sortField];
                let bValue = b[sortField];
                
                if (sortField === 'amount') {
                    aValue = Math.abs(aValue);
                    bValue = Math.abs(bValue);
                }
                
                if (sortField === 'date') {
                    aValue = new Date(aValue);
                    bValue = new Date(bValue);
                }
                
                if (aValue < bValue) return sortDirection === 'asc' ? -1 : 1;
                if (aValue > bValue) return sortDirection === 'asc' ? 1 : -1;
                return 0;
            });
        }

        // Sort table by field
        function sortTable(field) {
            if (sortField === field) {
                sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
            } else {
                sortField = field;
                sortDirection = 'desc';
            }
            
            sortTransactions();
            renderTransactions();
        }

        // Render transactions in table and mobile view
        function renderTransactions() {
            const startIndex = (currentPage - 1) * pageSize;
            const endIndex = startIndex + pageSize;
            const pageTransactions = filteredTransactions.slice(startIndex, endIndex);

            // Render desktop table
            const tableBody = document.getElementById('transactionTableBody');
            tableBody.innerHTML = pageTransactions.map(transaction => `
                <tr class="hover:bg-secondary-50 transition-colors duration-200" data-transaction-id="${transaction.id}">
                    <td class="px-6 py-4">
                        <input type="checkbox" class="transaction-checkbox" value="${transaction.id}" 
                               ${selectedTransactions.has(transaction.id) ? 'checked' : ''} 
                               onchange="toggleTransactionSelection('${transaction.id}')">
                    </td>
                    <td class="px-6 py-4 text-sm text-text-primary data-mono">
                        ${formatDate(transaction.date)}
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm font-medium text-text-primary">${transaction.description}</div>
                        <div class="text-xs text-secondary-500">${transaction.merchant}</div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getCategoryBadgeClass(transaction.category)}">
                            ${getCategoryName(transaction.category)}
                        </span>
                    </td>
                    <td class="px-6 py-4 text-sm data-mono ${transaction.amount >= 0 ? 'text-success-600' : 'text-error-600'}">
                        ${transaction.amount >= 0 ? '+' : ''}$${Math.abs(transaction.amount).toFixed(2)}
                    </td>
                    <td class="px-6 py-4 text-sm text-text-primary data-mono">
                        $${transaction.balance.toFixed(2)}
                    </td>
                    <td class="px-6 py-4">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusBadgeClass(transaction.status)}">
                            ${transaction.status.charAt(0).toUpperCase() + transaction.status.slice(1)}
                        </span>
                    </td>
                    <td class="px-6 py-4 text-sm">
                        <button onclick="showTransactionDetails('${transaction.id}')" 
                                class="text-primary-600 hover:text-primary-700 font-medium">
                            View Details
                        </button>
                    </td>
                </tr>
            `).join('');

            // Render mobile cards
            const mobileList = document.getElementById('mobileTransactionList');
            mobileList.innerHTML = pageTransactions.map(transaction => `
                <div class="card p-4" data-transaction-id="${transaction.id}">
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex items-center space-x-3">
                            <input type="checkbox" class="transaction-checkbox" value="${transaction.id}" 
                                   ${selectedTransactions.has(transaction.id) ? 'checked' : ''} 
                                   onchange="toggleTransactionSelection('${transaction.id}')">
                            <div>
                                <h4 class="font-medium text-text-primary">${transaction.description}</h4>
                                <p class="text-sm text-secondary-500">${transaction.merchant}</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-lg font-semibold data-mono ${transaction.amount >= 0 ? 'text-success-600' : 'text-error-600'}">
                                ${transaction.amount >= 0 ? '+' : ''}$${Math.abs(transaction.amount).toFixed(2)}
                            </p>
                            <p class="text-xs text-secondary-500 data-mono">${formatDate(transaction.date)}</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getCategoryBadgeClass(transaction.category)}">
                                ${getCategoryName(transaction.category)}
                            </span>
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusBadgeClass(transaction.status)}">
                                ${transaction.status.charAt(0).toUpperCase() + transaction.status.slice(1)}
                            </span>
                        </div>
                        <button onclick="showTransactionDetails('${transaction.id}')" 
                                class="text-primary-600 hover:text-primary-700 text-sm font-medium">
                            Details
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Helper functions for formatting
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                month: 'short', 
                day: 'numeric', 
                year: 'numeric' 
            });
        }

        function getCategoryName(category) {
            const categories = {
                'food': 'Food & Dining',
                'shopping': 'Shopping',
                'transport': 'Transportation',
                'utilities': 'Utilities',
                'entertainment': 'Entertainment',
                'healthcare': 'Healthcare',
                'salary': 'Income',
                'other': 'Other'
            };
            return categories[category] || 'Other';
        }

        function getCategoryBadgeClass(category) {
            const classes = {
                'food': 'bg-accent-100 text-accent-600',
                'shopping': 'bg-primary-100 text-primary-600',
                'transport': 'bg-secondary-100 text-secondary-600',
                'utilities': 'bg-warning-100 text-warning-600',
                'entertainment': 'bg-purple-100 text-purple-600',
                'healthcare': 'bg-error-100 text-error-600',
                'salary': 'bg-success-100 text-success-600',
                'other': 'bg-secondary-100 text-secondary-600'
            };
            return classes[category] || 'bg-secondary-100 text-secondary-600';
        }

        function getStatusBadgeClass(status) {
            const classes = {
                'completed': 'bg-success-100 text-success-600',
                'pending': 'bg-warning-100 text-warning-600',
                'failed': 'bg-error-100 text-error-600'
            };
            return classes[status] || 'bg-secondary-100 text-secondary-600';
        }

        // Transaction selection functions
        function toggleTransactionSelection(transactionId) {
            if (selectedTransactions.has(transactionId)) {
                selectedTransactions.delete(transactionId);
            } else {
                selectedTransactions.add(transactionId);
            }
            updateSelectAllCheckbox();
        }

        function toggleSelectAll() {
            const selectAllCheckbox = document.getElementById('selectAll');
            const headerCheckbox = document.getElementById('headerCheckbox');
            const checkboxes = document.querySelectorAll('.transaction-checkbox');
            
            if (selectAllCheckbox.checked || headerCheckbox.checked) {
                checkboxes.forEach(checkbox => {
                    checkbox.checked = true;
                    selectedTransactions.add(checkbox.value);
                });
            } else {
                checkboxes.forEach(checkbox => {
                    checkbox.checked = false;
                    selectedTransactions.delete(checkbox.value);
                });
            }
        }

        function updateSelectAllCheckbox() {
            const selectAllCheckbox = document.getElementById('selectAll');
            const headerCheckbox = document.getElementById('headerCheckbox');
            const checkboxes = document.querySelectorAll('.transaction-checkbox');
            const checkedCount = Array.from(checkboxes).filter(cb => cb.checked).length;
            
            if (checkedCount === 0) {
                selectAllCheckbox.checked = false;
                headerCheckbox.checked = false;
                selectAllCheckbox.indeterminate = false;
                headerCheckbox.indeterminate = false;
            } else if (checkedCount === checkboxes.length) {
                selectAllCheckbox.checked = true;
                headerCheckbox.checked = true;
                selectAllCheckbox.indeterminate = false;
                headerCheckbox.indeterminate = false;
            } else {
                selectAllCheckbox.checked = false;
                headerCheckbox.checked = false;
                selectAllCheckbox.indeterminate = true;
                headerCheckbox.indeterminate = true;
            }
        }

        // Pagination functions
        function updatePagination() {
            const totalPages = Math.ceil(filteredTransactions.length / pageSize);
            const pageNumbers = document.getElementById('pageNumbers');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            // Update button states
            prevBtn.disabled = currentPage === 1;
            nextBtn.disabled = currentPage === totalPages;
            
            // Generate page numbers
            let pages = [];
            const maxVisiblePages = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage < maxVisiblePages - 1) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            for (let i = startPage; i <= endPage; i++) {
                pages.push(i);
            }
            
            pageNumbers.innerHTML = pages.map(page => `
                <button class="px-3 py-1 text-sm rounded ${page === currentPage ? 'bg-primary text-white' : 'text-secondary-600 hover:bg-secondary-100'}" 
                        onclick="goToPage(${page})">
                    ${page}
                </button>
            `).join('');
        }

        function goToPage(page) {
            currentPage = page;
            renderTransactions();
            updatePagination();
        }

        function previousPage() {
            if (currentPage > 1) {
                currentPage--;
                renderTransactions();
                updatePagination();
            }
        }

        function nextPage() {
            const totalPages = Math.ceil(filteredTransactions.length / pageSize);
            if (currentPage < totalPages) {
                currentPage++;
                renderTransactions();
                updatePagination();
            }
        }

        function updateResultsCount() {
            document.getElementById('resultsCount').textContent = filteredTransactions.length;
        }

        // Modal functions
        function showTransactionDetails(transactionId) {
            const transaction = mockTransactions.find(t => t.id === transactionId);
            if (!transaction) return;
            
            const modalContent = document.getElementById('modalContent');
            modalContent.innerHTML = `
                <div class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-sm font-medium text-secondary-600 mb-2">Transaction ID</h4>
                            <p class="text-text-primary data-mono">${transaction.id}</p>
                        </div>
                        <div>
                            <h4 class="text-sm font-medium text-secondary-600 mb-2">Reference Number</h4>
                            <p class="text-text-primary data-mono">${transaction.reference}</p>
                        </div>
                        <div>
                            <h4 class="text-sm font-medium text-secondary-600 mb-2">Date & Time</h4>
                            <p class="text-text-primary">${formatDate(transaction.date)}</p>
                        </div>
                        <div>
                            <h4 class="text-sm font-medium text-secondary-600 mb-2">Status</h4>
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusBadgeClass(transaction.status)}">
                                ${transaction.status.charAt(0).toUpperCase() + transaction.status.slice(1)}
                            </span>
                        </div>
                        <div>
                            <h4 class="text-sm font-medium text-secondary-600 mb-2">Amount</h4>
                            <p class="text-2xl font-bold data-mono ${transaction.amount >= 0 ? 'text-success-600' : 'text-error-600'}">
                                ${transaction.amount >= 0 ? '+' : ''}$${Math.abs(transaction.amount).toFixed(2)}
                            </p>
                        </div>
                        <div>
                            <h4 class="text-sm font-medium text-secondary-600 mb-2">Account Balance</h4>
                            <p class="text-2xl font-bold text-text-primary data-mono">$${transaction.balance.toFixed(2)}</p>
                        </div>
                        <div>
                            <h4 class="text-sm font-medium text-secondary-600 mb-2">Account</h4>
                            <p class="text-text-primary capitalize">${transaction.account} Account</p>
                        </div>
                        <div>
                            <h4 class="text-sm font-medium text-secondary-600 mb-2">Category</h4>
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getCategoryBadgeClass(transaction.category)}">
                                ${getCategoryName(transaction.category)}
                            </span>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="text-sm font-medium text-secondary-600 mb-2">Description</h4>
                        <p class="text-text-primary">${transaction.description}</p>
                    </div>
                    
                    <div>
                        <h4 class="text-sm font-medium text-secondary-600 mb-2">Merchant</h4>
                        <p class="text-text-primary">${transaction.merchant}</p>
                    </div>
                    
                    <div>
                        <h4 class="text-sm font-medium text-secondary-600 mb-2">Location</h4>
                        <p class="text-text-primary">${transaction.location}</p>
                    </div>
                    
                    <div class="pt-4 border-t border-secondary-200">
                        <div class="flex space-x-3">
                            <button class="btn-secondary flex-1">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                                Download Receipt
                            </button>
                            <button class="btn-secondary flex-1">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
                                </svg>
                                Share
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('transactionModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('transactionModal').classList.add('hidden');
        }

        // Reset filters
        function resetFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('accountFilter').value = '';
            document.getElementById('typeFilter').value = '';
            document.getElementById('categoryFilter').value = '';
            document.getElementById('fromDate').value = '2025-08-01';
            document.getElementById('toDate').value = '2025-09-05';
            document.getElementById('minAmount').value = '';
            document.getElementById('maxAmount').value = '';
            
            filterTransactions();
        }

        // Close modal when clicking outside
        document.getElementById('transactionModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Initialize filters on page load
        filterTransactions();
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>